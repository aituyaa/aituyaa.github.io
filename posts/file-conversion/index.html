<!DOCTYPE html>
<html lang="zh-CN"><head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <meta name="description" content="File Conversion - https://loveminimal.github.io/posts/file-conversion/">
    <meta name="author" content="Jack - https://loveminimal.github.io/">
    
    <meta name="msvalidate.01" content="B46311949B856F2A7015F366FB3CE878" />
    <title>File Conversion</title>
    <link rel="icon" type="image/png" href="/favicon.ico">
    
    <link rel="stylesheet" href="https://loveminimal.github.io/style.min.588bdbe244863f48f211eae6ac79640e39689f34e9568c6f2789c5519ab60956.css">
    
    <script type="text/javascript" src="/main.js" defer></script>
    
</head>
<body class="active-animate ">
        <div id="header"><div class="container-header">
    <div id="vars" class="container-vars" style="display: none;">
	{
		"isSingleColumnOfPostList": true,
		"hasFoldAllCodeBlocks": false,
		"svgColor": "",
		"en": false,
		"dark": false
	}
</div>
    <h1 class="title">
        
            File Conversion
            
        
    </h1>

    <div class="container-breadcrumb-nav">
    
    <div class="breadcrumb-nav-bar">
        <div><a href="/"><svg t="1656411084410" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2954" width="16" height="16"><path d="M947.5 390.6l-377-290c-34.5-26.5-82.6-26.5-117.1 0l-377 290c-14 10.8-16.6 30.9-5.9 44.9 10.8 14 30.9 16.6 44.9 5.9l28.5-21.9V768c0 88.2 71.8 160 160 160h80c35.3 0 64-28.7 64-64V640c0-17.6 14.4-32 32-32h64c17.6 0 32 14.4 32 32v224c0 35.3 28.7 64 64 64h80c88.2 0 160-71.8 160-160V419.4l28.5 21.9c5.8 4.5 12.7 6.6 19.5 6.6 9.6 0 19.1-4.3 25.4-12.5 10.8-13.9 8.2-34-5.8-44.8zM816 768c0 52.9-43.1 96-96 96h-80V640c0-52.9-43.1-96-96-96h-64c-52.9 0-96 43.1-96 96v224h-80c-52.9 0-96-43.1-96-96V370.2l284.5-218.8c11.5-8.8 27.5-8.8 39 0L816 370.2V768z" fill="#6c757d" p-id="2955"></path></svg></a></div>
        <div><a href="/nav"><svg t="1656411531924" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5827" width="16" height="16"><path d="M849.59197473 125.23018519L139.22930586 391.72854662a23.35052669 23.35052669 0 0 0-14.95414244 21.65490745c-0.12257519 9.70384955 5.61801843 18.46795771 14.40255493 22.04306141l318.42928099 129.25528056 119.51057092 320.39047893c3.06437293 8.23295069 10.35758221 13.89182751 18.7335381 14.87242563l2.7170774 0.14300521a22.79893918 22.79893918 0 0 0 21.20546682-15.36272638l259.51158924-729.54564933a23.8612558 23.8612558 0 0 0-5.31158128-24.55584682 22.3290685 22.3290685 0 0 0-23.9021142-5.43415649zM793.65694081 211.64552314l-196.63064161 552.75171747-91.91077952-246.37564122-253.62799211-102.96295445 542.16941324-203.4131218z" p-id="5828" fill="#6c757d"></path></svg></a></div>
        <div><a href="/search"><svg t="1656411627509" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1730" width="14" height="14"><path d="M469.333333 85.333333c211.968 0 384 172.032 384 384s-172.032 384-384 384-384-172.032-384-384 172.032-384 384-384z m0 682.666667c164.992 0 298.666667-133.674667 298.666667-298.666667 0-165.034667-133.674667-298.666667-298.666667-298.666666-165.034667 0-298.666667 133.632-298.666666 298.666666 0 164.992 133.632 298.666667 298.666666 298.666667z m362.026667 3.029333l120.704 120.661334-60.373333 60.373333-120.661334-120.704 60.330667-60.330667z" p-id="1731" fill="#6c757d"></path></svg></a></div>
        <div><a href="/posts"><svg t="1656411724198" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5655" width="12" height="12"><path d="M811.705761 1024H212.294239c-93.1199 0-174.823046-87.570975-174.823046-187.387854V162.322018C37.471193 69.776145 112.604921 0 212.294239 0H596.190595l7.015883 5.93161c111.74388 95.479788 185.857116 170.741078 279.614824 266.093304 29.65805 30.040735 61.165743 62.122454 96.436499 97.393211l7.271006 7.334787v459.859234c-0.063781 99.816879-81.703145 187.387854-174.823046 187.387854zM212.294239 49.94033c-72.391155 0-124.882716 47.261538-124.882716 112.381688v674.290128c0 71.94469 59.507443 137.383743 124.882716 137.383743h599.411522c65.311492 0 124.882716-65.439053 124.882716-137.383743V397.417876c-32.528184-32.464404-61.73977-62.250016-89.356836-90.377328-90.951355-92.418312-163.278729-165.957521-269.601245-257.163999H212.294239z" fill="#6c757d" p-id="5656"></path><path d="M936.588477 449.526752h-212.326129c-99.753099 0-187.324073-81.703145-187.324073-174.823046V49.94033a25.002055 25.002055 0 0 1 49.94033 0v224.763376c0 65.311492 65.502834 124.882716 137.383743 124.882716h212.326129a25.002055 25.002055 0 1 1 0 49.94033z" fill="#6c757d" p-id="5657"></path></svg></a></div>
        <div><a href="/archive"><svg t="1656411795742" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7334" width="12" height="12"><path d="M884.224 522.24H504.32V141.824c0-16.896-13.824-30.72-30.72-30.72-120.32 0-233.472 47.616-317.952 134.144S26.112 445.952 29.184 566.784c2.56 114.688 49.152 222.72 131.072 304.128 81.92 81.408 189.952 128 304.64 130.56h10.24c117.76 0 227.84-45.568 312.32-128.512 86.528-85.504 133.632-199.68 132.608-321.024-0.512-2.048-1.536-29.696-35.84-29.696z m-140.288 307.712c-74.752 73.728-173.056 112.64-277.504 110.592-205.824-4.608-370.688-169.472-375.296-374.784-3.072-104.448 35.84-202.752 108.544-277.504 65.536-67.072 151.552-107.52 243.712-114.688v378.88c0 16.896 13.824 30.72 30.72 30.72 129.024 0 311.296 0 382.976 0.512-6.144 93.184-46.08 179.712-113.152 246.272z" fill="#6c757d" p-id="7335"></path><path d="M603.136 11.264c-8.192-0.512-15.872 3.072-22.016 8.704-5.632 5.632-9.216 13.824-9.216 22.016v378.88c0 16.896 13.824 30.72 30.72 30.72h378.88c16.896 0 30.72-13.824 30.72-30.72 0-223.744-183.808-407.552-409.088-409.6z m30.208 378.88V74.24c167.424 16.384 301.056 150.016 315.904 315.904h-315.904z" fill="#6c757d" p-id="7336"></path></svg></a></div>
        <div id="light-dark" style="cursor: pointer;"><a><svg t="1656411842215" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5086" width="12" height="12"><path d="M1007.492874 384.513055c-8.795694-34.58307-21.189627-67.666874-36.682043-99.05151-2.698679-5.397358-10.894667-3.498287-10.894666 2.598728v0.299853c0 32.484098-6.896624 63.868734-19.890263 92.554691-10.694764 23.488501-25.487523 45.077933-43.978471 64.068635-41.779547 42.679107-99.05151 66.967217-158.722299 67.26707-61.869712 0.299853-119.941284-24.188159-162.920244-68.966238-40.280281-41.979449-62.56937-98.251902-62.269516-156.323473 0.399804-59.270984 23.588452-114.94373 65.567901-156.823229 19.59041-19.59041 42.179351-35.082826 66.667364-46.077443C672.956643 71.166451 704.041426 64.469729 736.125719 64.469729h1.299364c6.097015 0 8.096037-8.096037 2.598728-10.794715C708.739126 37.982696 675.655322 25.488812 641.172203 16.493216 599.492607 5.598549 555.714038-0.098662 510.536154 0.001289 222.37722 0.700947-7.41029 237.38508 0.185992 525.444064c7.096526 271.667008 225.889418 490.559851 497.456474 497.856279 287.559228 7.796183 524.14341-220.891864 525.842579-508.551044 0.299853-44.977981-5.297407-88.656599-15.992171-130.236244z m-83.15929 301.552378c-22.588942 53.27392-54.873137 101.250434-95.953027 142.330323-41.179841 41.179841-89.056403 73.464036-142.330324 95.953027-55.172991 23.288599-113.744317 35.182777-174.314666 35.182777s-119.141675-11.794226-174.314666-35.182777c-53.27392-22.588942-101.250434-54.873137-142.330323-95.953027-41.179841-41.179841-73.464036-89.056403-95.953027-142.330323C75.749001 630.892442 63.954774 572.221164 63.954774 511.750767s11.794226-119.141675 35.182777-174.314666c22.588942-53.27392 54.873137-101.250434 95.953027-142.330323 41.179841-41.179841 89.056403-73.464036 142.330323-95.953027C392.593892 75.7642 451.26517 63.969974 511.735567 63.969974c13.99315 0 27.886348 0.599706 41.679596 1.89907C489.246577 118.643209 448.266638 198.704016 448.266638 288.360126c0 159.022152 128.836929 287.859081 287.859081 287.859081 89.156354 0 168.817357-40.580134 221.691473-104.149015 1.099462 13.09359 1.699168 26.387082 1.699168 39.680575 0 60.470397-11.794226 119.141675-35.182776 174.314666z" p-id="5087" fill="#6c757d"></path></svg></a></div>
        
    </div>

    
</div>

            <div id="toc">ğŸ“œ</div>
        
    
    
</div>
</div>
        <div id="content">















<div class="container-main 
     container-page 
">

    <div class="desc">
        
        <span>
            
            <svg t="1656736000388" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7409" width="12" height="12"><path d="M524.885333 338.986667L200.362667 663.466667c-17.28 15.274667-27.989333 36.693333-29.696 56.234666v133.76l130.730666 0.085334c22.784-1.621333 43.989333-12.245333 61.013334-31.701334l322.688-322.645333-160.213334-160.213333z m60.373334-60.330667l160.170666 160.213333 102.144-102.144a19.712 19.712 0 0 0 0-27.861333L715.093333 176.426667a19.456 19.456 0 0 0-27.605333 0L585.258667 278.613333zM701.312 85.333333c27.946667 0 54.741333 11.136 74.282667 30.848l132.309333 132.309334a105.045333 105.045333 0 0 1 0 148.565333L424.874667 879.957333c-29.824 34.346667-72.106667 55.466667-120.448 58.794667H85.333333v-42.666667l0.128-179.84c3.626667-44.970667 24.576-86.826667 56.448-114.944l485.12-485.034666A104.789333 104.789333 0 0 1 701.269333 85.333333z" p-id="7410" fill="#adb5bd"></path></svg>
            2020-11-26&nbsp;
        </span>
        <span>
            
            <svg t="1656737270708" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="23838" width="11" height="11"><path d="M824.264 95.36c0-23.859 25.043-44.16 48.902-44.16s49.714 20.301 49.714 44.16v190.08c0 23.859-19.054 52.868-42.913 52.868h-190.08c-23.859 0-46.696-25.96-46.696-49.819s22.55-46.249 46.409-46.249h82.025C702.344 175.534 610.22 155.853 512 155.853c-206.775 0-360.398 149.372-360.398 356.147 0 206.775 153.623 358.23 360.398 358.23 206.775 0 357.467-151.455 357.467-358.23 0-23.859 23.634-50.706 53.413-50.706 29.78 0 49.92 26.847 49.92 50.706 0 254.493-206.307 460.8-460.8 460.8-254.493 0-460.8-206.307-460.8-460.8C51.2 257.507 257.507 51.2 512 51.2c122.4 0 226.684 33.296 312.264 117.369 0.358 0.351 0.358-24.052 0-73.209z" p-id="23839" fill="#adb5bd"></path></svg>
            2023-05-08&nbsp;&nbsp;&nbsp;
        </span>
        <span>
            
            <svg t="1656737548689" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="33866" width="12" height="12"><path d="M832.038608 64.662657H192.030028C121.255125 64.662657 63.940169 121.98845 63.940169 192.694717v446.793671C63.940169 710.205493 121.255125 767.643272 192.030028 767.643272h133.353183a63.940169 63.940169 0 0 1 55.219742 31.576328l76.099638 129.83828c12.358154 21.093031 33.790754 31.626903 55.216129 31.626903s42.832688-10.544709 55.198067-31.619678l76.222461-129.870792a63.940169 63.940169 0 0 1 55.212517-31.551041h133.54103c70.576219 0 127.732228-57.289669 127.732227-127.800865V192.391272C959.825022 121.85479 902.643727 64.662657 832.038608 64.662657zM895.884854 639.842407A63.85347 63.85347 0 0 1 832.092795 703.703103h-133.54103a127.753903 127.753903 0 0 0-110.349172 63.09847l-76.222461 129.856342a0.274545 0.274545 0 0 1 0-0.050574h-0.032512s-0.021675 0.061411-0.032512 0.061412l-76.1466-129.85273A127.804477 127.804477 0 0 0 325.383211 703.703103H192.030028A64.207489 64.207489 0 0 1 127.880338 639.488388V192.694717A64.102729 64.102729 0 0 1 192.030028 128.602826h640.00858A63.799284 63.799284 0 0 1 895.884854 192.391272v447.451135z" fill="#adb5bd" p-id="33867"></path><path d="M608.154093 288.092004A31.970084 31.970084 0 0 0 576.184009 320.062089v160.078006l-134.650049-179.278119A31.970084 31.970084 0 0 0 384.002258 320.062089v255.760676a31.970084 31.970084 0 0 0 63.940169 0v-159.958796l134.650048 179.274507a31.970084 31.970084 0 0 0 57.531703-19.200113V320.062089a31.970084 31.970084 0 0 0-31.970085-31.970085z" fill="#adb5bd" p-id="33868"></path></svg>
            2319 å­—</span>&nbsp;
        <span>
            
            <svg t="1656737462334" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="32892" width="12" height="12"><path d="M512 74.666667C270.933333 74.666667 74.666667 270.933333 74.666667 512S270.933333 949.333333 512 949.333333 949.333333 753.066667 949.333333 512 753.066667 74.666667 512 74.666667z m0 810.666666c-204.8 0-373.333333-168.533333-373.333333-373.333333S307.2 138.666667 512 138.666667 885.333333 307.2 885.333333 512 716.8 885.333333 512 885.333333z" p-id="32893" fill="#adb5bd"></path><path d="M695.466667 567.466667l-151.466667-70.4V277.333333c0-17.066667-14.933333-32-32-32s-32 14.933333-32 32v238.933334c0 12.8 6.4 23.466667 19.2 29.866666l170.666667 81.066667c4.266667 2.133333 8.533333 2.133333 12.8 2.133333 12.8 0 23.466667-6.4 29.866666-19.2 6.4-14.933333 0-34.133333-17.066666-42.666666z" p-id="32894" fill="#adb5bd"></path></svg>
            5 åˆ†é’Ÿ</span>
            <div class="container-ctgtag">
	<div class="taxonomy">
		
		<div class="ctg">
			
			
			<a href="/categories/javascript">JavaScript</a>
			
		</div>
		<div class="tag">
			
			
			
		</div>
	</div>
</div>
        
    </div>
    
    <div class="toc">
        
        <div class="page-operation">
            <div><a href="#"><img src="/imgs/icons/arrow-up-circle.svg" alt=""></a></div>
            <div><a href="https://loveminimal.github.io/posts/ajax/"><img src="/imgs/icons/arrow-left-circle.svg" alt=""></a></div>
            <div><a href="https://loveminimal.github.io/posts/drag-and-drop/"><img src="/imgs/icons/arrow-right-circle.svg" alt=""></a></div>
        </div>
        
        <nav id="TableOfContents">
  <ul>
    <li><a href="#blob1">Blob<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Blob">1</a></a></li>
    <li><a href="#file2">File<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/File">2</a></a></li>
    <li><a href="#base643">Base64<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/WindowBase64/Base64_encoding_and_decoding">3</a></a></li>
    <li><a href="#formdata">FormData</a></li>
    <li><a href="#è½¬æ¢4">è½¬æ¢<a href="https://blog.csdn.net/baymaxcsdn/article/details/108077233">4</a></a>
      <ul>
        <li><a href="#filetobase64">fileToBase64</a></li>
        <li><a href="#filetoblob">fileToBlob</a></li>
        <li><a href="#base64tofile">base64ToFile</a></li>
        <li><a href="#base64toblob">base64ToBlob</a></li>
        <li><a href="#blobtofile">blobToFile</a></li>
        <li><a href="#blobtobase64">blobToBase64</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>

    <div class='content  content '>
        <p>JavaScript ä¸­çš„ fileã€blob å’Œ base64 ã€‚</p>
<h2 id="blob1">Blob<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Blob">1</a></h2>
<p>Blob å¯¹è±¡è¡¨ç¤ºä¸€ä¸ªä¸å¯å˜ã€åŸå§‹æ•°æ®çš„ <em>_ç±»æ–‡ä»¶å¯¹è±¡</em> ï¼Œå®ƒçš„æ•°æ®å¯ä»¥æŒ‰æ–‡æœ¬æˆ–äºŒè¿›åˆ¶çš„æ ¼å¼è¿›è¡Œè¯»å–ï¼Œä¹Ÿå¯ä»¥è½¬æ¢æˆ <code>ReadableStream</code> æ¥ç”¨äºæ•°æ®æ“ä½œã€‚</p>
<p>Blob è¡¨ç¤ºçš„ä¸ä¸€å®šæ˜¯ JavaScript åŸç”Ÿæ ¼å¼çš„æ•°æ®ã€‚ <code>File</code> æ¥å£åŸºäº Blobï¼Œç»§æ‰¿äº† blob çš„åŠŸèƒ½å¹¶å°†å…¶æ‰©å±•ï¼Œä½¿å…¶æ”¯æŒç”¨æˆ·ç³»ç»Ÿä¸Šçš„æ–‡ä»¶ã€‚</p>
<p>è¦ä»å…¶ä»–é blob å¯¹è±¡å’Œæ•°æ®æ„é€ ä¸€ä¸ª Blob ï¼Œè¯·ä½¿ç”¨ <code>Blob()</code> å‡½æ•°ï¼›è¦åˆ›å»ºä¸€ä¸ª blob æ•°æ®çš„å­é›† blob ï¼Œè¯·ä½¿ç”¨ <code>slice()</code> æ–¹æ³•ï¼›è¦è·å–ç”¨æˆ·æ–‡ä»¶ç³»ç»Ÿä¸Šçš„æ–‡ä»¶å¯¹åº”çš„ Blob å¯¹è±¡ï¼Œè¯·å‚é˜… <code>File</code> æ–‡æ¡£ã€‚</p>
<p>æ¥å— Blob å¯¹è±¡çš„ API ä¹Ÿè¢«åˆ—åœ¨ <code>File</code> æ–‡æ¡£ä¸­ã€‚</p>
<p><em>_1. Blob() æ„é€ å‡½æ•°</em></p>
<p><code>Blob()</code> æ„é€ å‡½æ•°å…è®¸é€šè¿‡å…¶å®ƒå¯¹è±¡åˆ›å»º Blob å¯¹è±¡ï¼Œæ¯”å¦‚ï¼Œç”¨å­—ç¬¦ä¸²æ„å»ºä¸€ä¸ª blob ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">var</span> obj <span style="color:#000;font-weight:bold">=</span> { name<span style="color:#000;font-weight:bold">:</span> <span style="color:#d14">&#39;Jack Liu&#39;</span> };
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">var</span> blob <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> Blob([JSON.stringify(obj)], { type<span style="color:#000;font-weight:bold">:</span> <span style="color:#d14">&#39;application/json&#39;</span> });
</span></span></code></pre></div><p><em>_2. ä½¿ç”¨ Blob åˆ›å»ºä¸€ä¸ªæŒ‡å‘ç±»å‹åŒ–æ•°ç»„çš„ URL</em></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">var</span> typeArray <span style="color:#000;font-weight:bold">=</span> GetTheTypedArraySomehow();
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// ä¼ å…¥ä¸€ä¸ªåˆé€‚çš„ MIME ç±»å‹
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">var</span> blob <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> Blob([typeArray.buffer], { type<span style="color:#000;font-weight:bold">:</span> <span style="color:#d14">&#39;application/octet-stream&#39;</span> });
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">var</span> url <span style="color:#000;font-weight:bold">=</span> URL.creatObjectURL(blob);
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// ä¼šäº§ç”Ÿä¸€ä¸ªç±»ä¼¼ blob:d3958f5c-0777-0845-9dcf-2cb28783acaf è¿™æ ·çš„ URL å­—ç¬¦ä¸²
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// ä½ å¯ä»¥åƒä½¿ç”¨æ™®é€šçš„ URL é‚£æ ·ä½¿ç”¨å®ƒï¼Œæ¯”å¦‚ç”¨åœ¨ img.src ä¸Š
</span></span></span></code></pre></div><p><em>_3. ä» Blob ä¸­æå–æ•°æ®</em></p>
<p>ä¸€ç§ä» Blob ä¸­è¯»å–å†…å®¹çš„æ–¹æ³•æ˜¯ä½¿ç”¨ <code>FileReader</code> ï¼Œä»¥ä¸‹ä»£ç å°† Blob çš„å†…å®¹ä½œä¸ºç±»å‹æ•°ç»„è¯»å–ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">var</span> reader <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> FileReader();
</span></span><span style="display:flex;"><span>reader.addEventListener(<span style="color:#d14">&#39;loadend&#39;</span>, <span style="color:#000;font-weight:bold">function</span> () {
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">// reader.result åŒ…å«è¢«è½¬åŒ–ä¸ºç±»å‹æ•°ç»„ typed array çš„ blob
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>});
</span></span><span style="display:flex;"><span>reader.readAsArrayBuffer(blob);
</span></span></code></pre></div><p>å¦ä¸€ç§è¯»å– Blob ä¸­å†…å®¹çš„æ–¹å¼æ˜¯ä½¿ç”¨ Response å¯¹è±¡ï¼Œä¸‹è¿°ä»£ç å°† Blob ä¸­çš„å†…å®¹è¯»å–ä¸ºæ–‡æœ¬ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">var</span> text <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">await</span> <span style="color:#000;font-weight:bold">new</span> Response(blob).text();
</span></span></code></pre></div><p>é€šè¿‡ä½¿ç”¨ <code>FileReader</code> çš„å…¶å®ƒæ–¹æ³•å¯ä»¥æŠŠ Blob è¯»å–ä¸ºå­—ç¬¦ä¸²æˆ–è€…æ•°æ® URL ã€‚</p>
<h2 id="file2">File<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/File">2</a></h2>
<p>æ–‡ä»¶ï¼ˆ <code>File</code> ï¼‰æ¥å£æä¾›æœ‰å…³æ–‡ä»¶çš„ä¿¡æ¯ï¼Œå¹¶å…è®¸ç½‘é¡µä¸­çš„ JavaScript è®¿é—®å…¶å†…å®¹ã€‚</p>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼ŒFile å¯¹è±¡æ˜¯æ¥è‡ªç”¨æˆ·åœ¨ä¸€ä¸ª <code>&lt;input&gt;</code> å…ƒç´ ä¸Šé€‰æ‹©æ–‡ä»¶åè¿”å›çš„ <code>FileList</code> å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯æ¥è‡ªç”±æ‹–æ”¾æ“ä½œç”Ÿæˆçš„ <code>DataTransfer</code> å¯¹è±¡ï¼Œæˆ–è€…æ¥è‡ª <code>HTMLCanvasElement</code> ä¸Šçš„ <code>mozGetAsFile()</code> API ã€‚</p>
<p>File å¯¹è±¡æ˜¯ç‰¹æ®Šç±»å‹çš„ <code>Blob</code> ï¼Œä¸”å¯ä»¥ç”¨åœ¨ä»»æ„çš„ Blob ç±»å‹çš„ context ä¸­ã€‚æ¯”å¦‚è¯´ï¼Œ <code>FileReader, URL.createObjectURL(), createImageBitmap()</code> åŠ <code>XMLHttpRequest.send()</code> éƒ½èƒ½å¤„ç† Blob å’Œ File ã€‚</p>
<h2 id="base643">Base64<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/WindowBase64/Base64_encoding_and_decoding">3</a></h2>
<p>Base64 æ˜¯ä¸€ç»„ç›¸ä¼¼çš„äºŒè¿›åˆ¶åˆ°æ–‡æœ¬ï¼ˆbinary-to-textï¼‰çš„ <em>_ç¼–ç è§„åˆ™</em> ï¼Œä½¿å¾—äºŒè¿›åˆ¶æ•°æ®åœ¨è§£é‡Šæˆ radix-64 çš„è¡¨ç°å½¢å¼åèƒ½å¤Ÿç”¨ ASCII å­—ç¬¦ä¸²çš„æ ¼å¼è¡¨ç¤ºå‡ºæ¥ã€‚</p>
<blockquote>
<p>= Base64 è¿™ä¸ªè¯å‡ºè‡ªä¸€ç§ MIME æ•°æ®ä¼ è¾“ç¼–ç ã€‚</p>
</blockquote>
<p>Base64 ç¼–ç æ™®éåº”ç”¨äºéœ€è¦é€šè¿‡è¢«è®¾è®¡ä¸ºå¤„ç†æ–‡æœ¬æ•°æ®çš„åª’ä»‹ä¸Šå‚¨å­˜å’Œä¼ è¾“äºŒè¿›åˆ¶æ•°æ®è€Œéœ€è¦ç¼–ç è¯¥äºŒè¿›åˆ¶æ•°æ®çš„åœºæ™¯ï¼Œè¿™æ ·æ˜¯ä¸ºäº†ä¿è¯æ•°æ®çš„å®Œæ•´å¹¶ä¸”ä¸ç”¨åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ä¿®æ”¹è¿™äº›æ•°æ®ã€‚</p>
<p>åœ¨ JavaScript ä¸­ï¼Œæœ‰ä¸¤ä¸ªå‡½æ•°è¢«åˆ†åˆ«ç”¨æ¥è§£ç å’Œç¼–ç  base64 å­—ç¬¦ä¸²ï¼š <code>atob()</code> å’Œ <code>btoa()</code> ã€‚</p>
<p><code>atob()</code> å‡½æ•°èƒ½å¤Ÿè§£ç é€šè¿‡ base-64 ç¼–ç çš„å­—ç¬¦ä¸²æ•°æ®ï¼Œç›¸ååœ°ï¼Œ <code>btoa()</code> å‡½æ•°èƒ½å¤Ÿä»äºŒè¿›åˆ¶æ•°æ®å­—ç¬¦ä¸²åˆ›å»ºä¸€ä¸ª base-64 ç¼–ç çš„ ASCII å­—ç¬¦ä¸²ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#998;font-style:italic">// atob() å°† base64 è§£ç 
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// btoa() å°† å­—ç¬¦ä¸²è½¬ç ä¸º base64
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">var</span> str <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#39;javascript&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#0086b3">window</span>.btoa(str); <span style="color:#998;font-style:italic">// è½¬ç  â†’ amF2YXNjcmlwdA==
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#0086b3">window</span>.atob(<span style="color:#d14">&#39;amF2YXNjcmlwdA==&#39;</span>); <span style="color:#998;font-style:italic">// è§£ç  â†’ javascript
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// ä¸­æ–¹éœ€è¦å…ˆç”¨ encodeURIComponent å’Œ decodeURIComponent è½¬/è§£ç 
</span></span></span></code></pre></div><p><em>_ç¼–ç å°ºå¯¸å¢åŠ </em> ï¼Œæ¯ä¸€ä¸ª Base64 å­—ç¬¦ä¸²å®é™…ä¸Šä»£è¡¨ç€ 6 æ¯”ç‰¹ä½ï¼Œå› æ­¤ï¼Œ3 å­—èŠ‚ï¼ˆ1 å­—èŠ‚æ˜¯ 8 æ¯”ç‰¹ï¼Œ3 å­—èŠ‚ä¸º 24 æ¯”ç‰¹ï¼‰çš„å­—ç¬¦ä¸²/äºŒè¿›åˆ¶æ–‡ä»¶å¯ä»¥è½¬æ¢æˆ 4 ä¸ª Base64 å­—ç¬¦ï¼ˆ4 * 6 = 24 æ¯”ç‰¹ï¼‰ã€‚</p>
<p>è¿™æ„å‘³ç€ Base64 æ ¼å¼çš„å­—ç¬¦ä¸²æˆ–æ–‡ä»¶çš„å°ºå¯¸æ˜¯åŸå§‹å°ºå¯¸çš„ 133% ï¼Œå¦‚æœç¼–ç çš„æ•°æ®å¾ˆå°‘ï¼Œå¢åŠ çš„æ¯”ä¾‹å¯èƒ½ä¼šæ›´é«˜ã€‚</p>
<blockquote>
<p>= æ˜¯ä¸æ˜¯æœ‰äº›æ··ä¹±ï¼ŸHmm&hellip; æ¥çœ‹ä¸‹ç™¾åº¦ç™¾ç§‘å§ã€‚</p>
</blockquote>
<blockquote>
<p>Base64 è¦æ±‚æŠŠæ¯ä¸‰ä¸ª 8bit çš„å­—èŠ‚è½¬æ¢ä¸ºå››ä¸ª 6bit çš„å­—èŠ‚ï¼ˆ<code>3*8 = 4*6 = 24</code>ï¼‰ï¼Œç„¶åæŠŠ 6bit å†æ·»åŠ ä¸¤ä½é«˜ä½ 0 ï¼Œç»„æˆå››ä¸ª 8bit çš„å­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè½¬æ¢åçš„å­—ç¬¦ä¸²ç†è®ºä¸Šå°†è¦æ¯”åŸæ¥çš„é•¿ 1/3 ã€‚</p>
</blockquote>
<p>å…¶å…·è§„åˆ™å¦‚ä¸‹<a href="https://baike.baidu.com/item/base64/8545775?fr=aladdin">5</a>ï¼š</p>
<pre tabindex="0"><code>1. æŠŠ 3 ä¸ªå­—èŠ‚å˜æˆ 4 ä¸ªå­—èŠ‚
2. æ¯ 76 ä¸ªå­—ç¬¦åŠ ä¸€ä¸ªæ¢è¡Œç¬¦
3. æœ€åçš„ç»“æŸç¬¦ä¹Ÿè¦å¤„ç†
</code></pre><p>ä¸‹é¢æ¥çœ‹ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ã€‚</p>
<pre tabindex="0"><code>è½¬æ¢å‰ï¼š 10101101,10111010,01110110
ç­‰ä»·äºï¼š   101011   01,1011   1010,01  110110
è½¬æ¢åï¼š 00101011,00011011 ,00101001,00110110
åè¿›åˆ¶ï¼š 43       27        41       54

å¯¹ç…§ =Table 1: The Base64 Alphabet= ç è¡¨ï¼š
         r        b         p        2
</code></pre><p>å¦‚ä¸Šï¼Œä¸Šé¢çš„ 24 ä½ç¼–ç åçš„ Base64 å€¼ä¸º <code>rbp2</code> ã€‚è§£ç åŒç†ï¼ŒæŠŠ <code>rbp2</code> çš„äºŒè¿›åˆ¶ä½è¿æ¥ä¸Šå†é‡ç»„å¾—åˆ°çš„ 8 ä½å€¼ï¼Œå¾—å‡ºåŸç ã€‚</p>
<h2 id="formdata">FormData</h2>
<p>FormData æ¥å£æä¾›äº†ä¸€ç§è¡¨ç¤ºè¡¨å•æ•°æ®çš„é”®å€¼ <code>key/value</code> çš„æ„é€ æ–¹å¼ï¼Œå¹¶ä¸”å¯ä»¥è½»æ¾åœ°å°†æ•°æ®é€šè¿‡ <code>XMLHttpRequest.send()</code> æ–¹æ³•å‘é€å‡ºå»ã€‚å¦‚æœé€å‡ºæ—¶çš„ç¼–ç ç±»å‹è¢«è®¾ä¸º <code>multipart/form-data</code> ï¼Œå®ƒä¼šä½¿ç”¨å’Œè¡¨å•ä¸€æ ·çš„æ ¼å¼ã€‚</p>
<p>å®ç°äº† FormData æ¥å£çš„å¯¹è±¡å¯ä»¥ç›´æ¥åœ¨ <code>for...of</code> ç»“æ„ä¸­ä½¿ç”¨ï¼Œè€Œä¸éœ€è¦è°ƒç”¨ <code>entries()</code> ï¼š <code>for(var p of myFormData)</code> çš„ä½œç”¨å’Œ <code>for(var p of myFormData.entries())</code> æ˜¯ç›¸åŒçš„ã€‚</p>
<p><code>FormData()</code> æ„é€ å‡½æ•°ç”¨æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ FormData å¯¹è±¡ã€‚</p>
<blockquote>
<p>= æœ‰æ—¶å€™ï¼Œè¿™ç§â€œå‚è€ƒä¹¦å¼çš„å®šä¹‰â€çœŸçš„è®©äººå¾ˆâ€¦â€¦</p>
</blockquote>
<p><em>_FormData æœ‰ä¼šä¹ˆç”¨å‘¢ï¼Ÿ</em></p>
<p>FormData ç±»å‹æ˜¯åœ¨ XMLHttpRequest 2 çº§å®šä¹‰çš„ï¼Œå®ƒæ˜¯ä¸ºåºåˆ—åŒ–è¡¨å•ä»¥åŠåˆ›å»ºä¸è¡¨å•æ ¼å¼ç›¸åŒçš„æ•°æ®æä¾›ä¾¿åˆ©ï¼ˆç”¨äº XHR ä¼ è¾“ï¼‰ã€‚</p>
<p><em>_1. åºåˆ—åŒ–è¡¨å•</em></p>
<p>å°† form è¡¨å•å…ƒç´ çš„ <code>name</code> ä¸ <code>value</code> è¿›è¡Œç»„åˆï¼Œå®ç°è¡¨å•æ•°æ®çš„åºåˆ—åŒ–ï¼Œä»è€Œå‡å°‘è¡¨å•å…ƒç´ çš„æ‹¼æ¥ï¼Œæé«˜å·¥ä½œæ•ˆç‡ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#000080">form</span> <span style="color:#008080">id</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;myForm&#34;</span> <span style="color:#008080">method</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;post&#34;</span> <span style="color:#008080">action</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#000080">input</span> <span style="color:#008080">name</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;name&#34;</span> <span style="color:#008080">type</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;text&#34;</span> <span style="color:#008080">value</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;jack&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#000080">input</span> <span style="color:#008080">name</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;pswd&#34;</span> <span style="color:#008080">type</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;password&#34;</span> <span style="color:#008080">value</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;12345678&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#000080">input</span> <span style="color:#008080">type</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;submit&#34;</span> <span style="color:#008080">value</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;æäº¤&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#000080">form</span>&gt;
</span></span></code></pre></div><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªè¡¨å•å…ƒç´ ä½œä¸ºåˆå§‹åŒ–å‚æ•°ï¼Œæ¥å®ä¾‹åŒ–ä¸€ä¸ª FormData å¯¹è±¡ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#998;font-style:italic">// 1. è·å–é¡µé¢å·²æœ‰çš„ä¸€ä¸ª form è¡¨å•
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">var</span> myForm <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">document</span>.getElementById(<span style="color:#d14">&#39;myForm&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// 2. ç”¨è¡¨å•æ¥åˆå§‹åŒ–
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">var</span> formData <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> FormData(form);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// æˆ‘ä»¬å¯ä»¥æ ¹æ® name æ¥è®¿é—®è¡¨å•ä¸­çš„å­—æ®µ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">var</span> name <span style="color:#000;font-weight:bold">=</span> formData.get(<span style="color:#d14">&#39;name&#39;</span>); <span style="color:#998;font-style:italic">// â†’ jack
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">var</span> pswd <span style="color:#000;font-weight:bold">=</span> formData.get(<span style="color:#d14">&#39;pswd&#39;</span>); <span style="color:#998;font-style:italic">// â†’ 12345678
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šæ·»åŠ å…¶ä»–æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>formData.append(<span style="color:#d14">&#39;token&#39;</span>, <span style="color:#d14">&#39;fajskd.fj23jkf.sdfk&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// ä½ è¿˜å¯ä»¥é€šè¿‡ xhr æ¥å‘é€æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">var</span> xhr <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> XMLHttpRequest();
</span></span><span style="display:flex;"><span>xhr.open(<span style="color:#d14">&#39;post&#39;</span>, <span style="color:#d14">&#39;http://127.0.0.1/login&#39;</span>);
</span></span><span style="display:flex;"><span>xhr.setHeader(<span style="color:#d14">&#39;Content-Type&#39;</span>, <span style="color:#d14">&#39;application/x-www-form-urlencoded&#39;</span>); <span style="color:#998;font-style:italic">// ?? æ­¤å¤„å­˜ç–‘
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>xhr.send(formData);
</span></span><span style="display:flex;"><span>xhr.onload <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">function</span> () {
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span> (xhr.status <span style="color:#000;font-weight:bold">===</span> <span style="color:#099">200</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">// ...
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><p><em>_2. ç›´æ¥åˆ›å»ºä¸€ä¸ª FormData å¯¹è±¡</em></p>
<p>ä½¿ç”¨ <code>FormData</code> æ„é€ å‡½æ•°å¯ä»¥ç›´æ¥åˆ›å»ºä¸€ä¸ª FormData å¯¹è±¡ï¼Œå¦‚ï¼š <code>var formData = new FormData()</code> ï¼Œç„¶åï¼Œå°±å¯ä»¥è°ƒç”¨ç›¸å…³æ–¹æ³•è¿›è¡Œæ“ä½œã€‚</p>
<p><em>_3. å¸¸ç”¨æ–¹æ³•</em></p>
<blockquote>
<p>= æ— éæ˜¯â€œå¢åˆ æŸ¥æ”¹â€é‚£äº›äº‹å„¿â€¦â€¦</p>
</blockquote>
<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>append(key, value)</code></td>
<td>å‘ FormData ä¸­æ·»åŠ æ–°çš„å±æ€§å€¼ï¼Œå¯¹åº”çš„å±æ€§å€¼å­˜åœ¨ä¹Ÿä¸ä¼šè¦†ç›–</td>
</tr>
<tr>
<td><code>get(key)</code></td>
<td>è¿”å›åœ¨ FormData å¯¹è±¡ä¸­ä¸ç»™å®šé”®å…³è”çš„ç¬¬ä¸€ä¸ªå€¼</td>
</tr>
<tr>
<td><code>getAll(key)</code></td>
<td>è¿”å›ä¸€ä¸ªåŒ…å« FormData å¯¹è±¡ä¸­ä¸ç»™å®šé”®å…³è”çš„æ‰€æœ‰å€¼çš„æ•°ç»„</td>
</tr>
<tr>
<td><code>has(key)</code></td>
<td>è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼è¡¨æ˜ FormData å¯¹è±¡æ˜¯å¦åŒ…å«æŸäº›é”®</td>
</tr>
<tr>
<td><code>set(key, value)</code></td>
<td>ç»™ FormData è®¾ç½®å±æ€§å€¼ï¼Œå¦‚æœ FormData å¯¹åº”çš„å±æ€§å€¼å­˜åœ¨åˆ™è¦†ç›–åŸå€¼ï¼Œå¦åˆ™æ–°å¢ä¸€é¡¹å±æ€§å€¼</td>
</tr>
<tr>
<td><code>entries</code></td>
<td>è¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰é”®å€¼å¯¹çš„ iterator å¯¹è±¡</td>
</tr>
<tr>
<td><code>keys</code></td>
<td>è¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰é”®çš„ iterator å¯¹è±¡</td>
</tr>
<tr>
<td><code>values</code></td>
<td>è¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰å€¼çš„ iterator å¯¹è±¡</td>
</tr>
<tr>
<td><code>delete(key)</code></td>
<td>ä» FormData å¯¹è±¡é‡Œé¢åˆ é™¤ä¸€ä¸ªé”®å€¼å¯¹</td>
</tr>
</tbody>
</table>
<h2 id="è½¬æ¢4">è½¬æ¢<a href="https://blog.csdn.net/baymaxcsdn/article/details/108077233">4</a></h2>
<h3 id="filetobase64">fileToBase64</h3>
<p>ä¸»è¦åº”ç”¨åœºæ™¯ï¼šå›¾ç‰‡é¢„è§ˆã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">function</span> fileToBase64(file, callback) {
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">var</span> reader <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> FileReader();
</span></span><span style="display:flex;"><span>    reader.readAsDataURL(file);
</span></span><span style="display:flex;"><span>    reader.onload <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">function</span> (e) {
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">var</span> base64 <span style="color:#000;font-weight:bold">=</span> e.target.result;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">if</span> (<span style="color:#000;font-weight:bold">typeof</span> callback <span style="color:#000;font-weight:bold">===</span> <span style="color:#d14">&#39;function&#39;</span>) {
</span></span><span style="display:flex;"><span>            callback(base64);
</span></span><span style="display:flex;"><span>        } <span style="color:#000;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>            console.log(<span style="color:#d14">&#39;base64: &#39;</span>, base64);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="filetoblob">fileToBlob</h3>
<p>ä¸»è¦åº”ç”¨åœºæ™¯ï¼šæ–‡ä»¶ä¸Šä¼ ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">function</span> fileToBlob(file, callback) {
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">var</span> type <span style="color:#000;font-weight:bold">=</span> file.type;
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">var</span> reader <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> FileReader();
</span></span><span style="display:flex;"><span>    reader.readAsDataURL(file);
</span></span><span style="display:flex;"><span>    reader.onload <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">function</span> (e) {
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">var</span> blob <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> Blob([e.target.result], { type });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">if</span> (<span style="color:#000;font-weight:bold">typeof</span> callback <span style="color:#000;font-weight:bold">===</span> <span style="color:#d14">&#39;function&#39;</span>) {
</span></span><span style="display:flex;"><span>            callback(blob);
</span></span><span style="display:flex;"><span>        } <span style="color:#000;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>            console.log(<span style="color:#d14">&#39;blob: &#39;</span>, blob);
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">return</span> blob;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="base64tofile">base64ToFile</h3>
<p>ä¸»è¦åº”ç”¨åœºæ™¯ï¼šæ–‡ä»¶ä¸Šä¼ ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">function</span> base64ToFile(base64, callback(fileName)) {
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">var</span> arr <span style="color:#000;font-weight:bold">=</span> base64.split(<span style="color:#d14">&#39;,&#39;</span>),
</span></span><span style="display:flex;"><span>		type <span style="color:#000;font-weight:bold">=</span> arr[<span style="color:#099">0</span>].match(<span style="color:#009926">/:(.*?);/</span>)[<span style="color:#099">1</span>],
</span></span><span style="display:flex;"><span>		bstr <span style="color:#000;font-weight:bold">=</span> atob(arr[<span style="color:#099">1</span>]),
</span></span><span style="display:flex;"><span>		n <span style="color:#000;font-weight:bold">=</span> bstr.length,
</span></span><span style="display:flex;"><span>		u8arr <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> Unit8Array(n)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">while</span>(n<span style="color:#000;font-weight:bold">--</span>) {
</span></span><span style="display:flex;"><span>		u8arr[n] <span style="color:#000;font-weight:bold">=</span> bstr.charCodeAt(n)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">new</span> File([u8arr], fileName, {type})
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="base64toblob">base64ToBlob</h3>
<p>ä¸»è¦åº”ç”¨åœºæ™¯ï¼šæ–‡ä»¶ä¸Šä¼ ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#998;font-style:italic">//dataURL ç±»ä¼¼ä¸º data:img/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/2w...
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">function</span> base64ToBlob(base64, callback) {
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">var</span> arr <span style="color:#000;font-weight:bold">=</span> base64.split(<span style="color:#d14">&#39;,&#39;</span>),
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">// mimeString
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        type <span style="color:#000;font-weight:bold">=</span> arr[<span style="color:#099">0</span>].match(<span style="color:#009926">/:(.*?);/</span>)[<span style="color:#099">1</span>],
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">// byteString
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        bstr <span style="color:#000;font-weight:bold">=</span> atob(arr[<span style="color:#099">1</span>]),
</span></span><span style="display:flex;"><span>        n <span style="color:#000;font-weight:bold">=</span> bstr.length,
</span></span><span style="display:flex;"><span>        u8arr <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> Uint8Array(n);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">// for (var i = 0; i &lt; byteString.length; i++) {
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#998;font-style:italic">//     ia[i] = byteString.charCodeAt(i)
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#998;font-style:italic">// }
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">while</span> (n<span style="color:#000;font-weight:bold">--</span>) {
</span></span><span style="display:flex;"><span>        u8arr[n] <span style="color:#000;font-weight:bold">=</span> bstr.charCodeAt(n);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">new</span> Blob([u8arr], { type });
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="blobtofile">blobToFile</h3>
<p>ä¸»è¦åº”ç”¨åœºæ™¯ï¼šæ–‡ä»¶ä¸Šä¼ ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">function</span> blobToFile(blob, fileName) {
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">var</span> file <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> File([blob], fileName, { type<span style="color:#000;font-weight:bold">:</span> blob.type });
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> file;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="blobtobase64">blobToBase64</h3>
<p>ä¸»è¦åº”ç”¨åœºæ™¯ï¼šå›¾ç‰‡é¢„è§ˆã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">function</span> blobToBase64(blob, callback) {
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">var</span> reader <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> FileReader();
</span></span><span style="display:flex;"><span>    reader.readAsDataURL(blob);
</span></span><span style="display:flex;"><span>    reader.onload <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">function</span> (e) {
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">if</span> (<span style="color:#000;font-weight:bold">typeof</span> callback <span style="color:#000;font-weight:bold">===</span> <span style="color:#d14">&#39;function&#39;</span>) {
</span></span><span style="display:flex;"><span>            callback(e.target.result);
</span></span><span style="display:flex;"><span>        } <span style="color:#000;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>            console.log(<span style="color:#d14">&#39;base64: &#39;</span>, e.target.result);
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">return</span> e.target.result;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>
    </div>

    

    

    <div class="container-prevnext">
    <div><a href="https://loveminimal.github.io/posts/ajax/">â† Ajax</a></div>
    <div><a href="https://loveminimal.github.io/posts/drag-and-drop/">Drag and Drop  â†’</a></div>
</div>
    
    <div class="container-comment">
	<script src="https://utteranc.es/client.js"
        repo="loveminimal/comment"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
	</script>
</div>

    
</div>

        </div>
        <div id="footer"><div class="container-footer">
    
    <a href="//beian.miit.gov.cn" target="_blank">
        
        è±«ICPå¤‡2022002918å·-1
        
    </a>
    <a id="s" href="/secrets">&nbsp;</a>
    
</div></div>
    </body>
</html>
